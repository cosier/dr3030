#!/bin/bash

BIN="$( cd  "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
ROOT=$( cd $BIN/../ && pwd )

function block_for_change() {
  inotifywait -q -r \
    -e close_write,moved_to,create,modify,delete,move \
    $ROOT/src
}

# Run initially
$ROOT/bin/run clean build $@

# Now block and watch
while block_for_change; do
  echo "File changed: $filename"
  $ROOT/bin/run clean build $@
done
