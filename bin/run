#!/bin/bash

BIN="$( cd  "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
ROOT=$( cd $BIN/../ && pwd )

if [[ $1 == "clean" ]]; then
  shift;
  $BIN/clean
fi

if [[ $1 == "build" ]]; then
  shift;
  $BIN/build

  if [[ $? != 0 ]]; then
    echo "Build Failed"
    exit 1
  fi
fi

if [ ! -f $ROOT/build/src/main/dr3030 ]; then
  $BIN/build

  if [[ $? != 0 ]]; then
    echo "Build Failed"
    exit 1
  fi
fi

CMD="$ROOT/build/src/main/dr3030 $@"
echo $CMD
echo "------------------------------------------------"
$CMD
